<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reconciliation by means of the Multivariate Cholette method — multivariatecholette • rjd3bench</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reconciliation by means of the Multivariate Cholette method — multivariatecholette"><meta name="description" content="This is a multivariate extension of the Cholette benchmarking method which
can be used for the purpose of reconciliation. While standard benchmarking
methods consider one target series at a time, reconciliation techniques aim
to restore consistency in a system of time series with regards to both
contemporaneous and temporal constraints. Reconciliation techniques are
typically needed when the total and its components are estimated
independently (the so-called direct approach). The multivariate Cholette
method relies on the principle of movement preservation and encompasses other
reconciliation methods such as the multivariate Denton method."><meta property="og:description" content="This is a multivariate extension of the Cholette benchmarking method which
can be used for the purpose of reconciliation. While standard benchmarking
methods consider one target series at a time, reconciliation techniques aim
to restore consistency in a system of time series with regards to both
contemporaneous and temporal constraints. Reconciliation techniques are
typically needed when the total and its components are estimated
independently (the so-called direct approach). The multivariate Cholette
method relies on the principle of movement preservation and encompasses other
reconciliation methods such as the multivariate Denton method."><meta property="og:image" content="https://rjdverse.github.io/rjd3bench/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rjd3bench</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rjd3bench.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rjdverse/rjd3bench/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Reconciliation by means of the Multivariate Cholette method</h1>
      <small class="dont-index">Source: <a href="https://github.com/rjdverse/rjd3bench/blob/main/R/benchmark.R" class="external-link"><code>R/benchmark.R</code></a></small>
      <div class="d-none name"><code>multivariatecholette.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a multivariate extension of the Cholette benchmarking method which
can be used for the purpose of reconciliation. While standard benchmarking
methods consider one target series at a time, reconciliation techniques aim
to restore consistency in a system of time series with regards to both
contemporaneous and temporal constraints. Reconciliation techniques are
typically needed when the total and its components are estimated
independently (the so-called direct approach). The multivariate Cholette
method relies on the principle of movement preservation and encompasses other
reconciliation methods such as the multivariate Denton method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">multivariatecholette</span><span class="op">(</span></span>
<span>  <span class="va">xlist</span>,</span>
<span>  tcvector <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ccvector <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rho <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lambda <span class="op">=</span> <span class="fl">0.8</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-xlist">xlist<a class="anchor" aria-label="anchor" href="#arg-xlist"></a></dt>
<dd><p>a named list of ts objects including all input. Each element of
the list should correspond to one input series (a preliminary series, a
low-frequency series corresponding to one of the temporal aggregation
constraints or a high-frequency series corresponding to one of the
contemporaneous constraints).</p></dd>


<dt id="arg-tcvector">tcvector<a class="anchor" aria-label="anchor" href="#arg-tcvector"></a></dt>
<dd><p>a character vector defining each temporal constraints. Each
element of the vector must be written as "Y = sum(x)" where "Y" is the name
of a low frequency temporal constraint and "x" is the name of a
high-frequency preliminary series. The names are the one given in the
'xlist' argument. Default is NULL, which means that no temporal constraint
is considered.</p></dd>


<dt id="arg-ccvector">ccvector<a class="anchor" aria-label="anchor" href="#arg-ccvector"></a></dt>
<dd><p>a character vector defining each contemporaneous constraints.
Each element of the vector must be written in the form
"z=[w1*]x1+...+[wn*]xn" or "c=[w1*]x1+...+[wn*]xn" where "z" is the name of
a high frequency contemporaneous constraint, wj are optional numeric
weights, "x1,...,xn" are the names of the high-frequency preliminary series
and c is a constant. The "+" operator can be replaced by "-". The names of
the contemporaneous constraint(s) and the preliminary series are the one
given in the 'xlist' argument. Note that any series put on the left
hand side cannot appear on the right hand side of any other constraint. This
is because left hand side quantities are fixed while right hand side
quantities are adjusted so the equality holds. Default is NULL, which means
that no contemporaneous constraint is considered. This is equivalent to
applying the univariate Cholette method to each of the preliminary series
separately.</p></dd>


<dt id="arg-rho">rho<a class="anchor" aria-label="anchor" href="#arg-rho"></a></dt>
<dd><p>Numeric. Smoothing parameter whose value should be between 0 and
1. See vignette for more information on the choice of the rho parameter.</p></dd>


<dt id="arg-lambda">lambda<a class="anchor" aria-label="anchor" href="#arg-lambda"></a></dt>
<dd><p>Numeric. Adjustment model parameter. Typically, lambda = 0 for
additive benchmarking and lambda close to 1 to approach proportional
benchmarking. Setting lambda = 1 is also an option but it should be used
with caution as, in the case of a multivariate model, it may sometimes
result in benchmarked series whose level differs strongly from the
preliminary series. See vignette for more information on the choice of the
lambda parameter.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a named list with the benchmarked series is returned</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>For more information, see the vignette:</p>
<p><code><a href="https://rdrr.io/r/utils/browseVignettes.html" class="external-link">browseVignettes</a></code> <code>browseVignettes(package = "rjd3bench")</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: one "standard" contemporaneous constraint: x1+x2+x3 = z</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">7.2</span>, <span class="fl">8.1</span>, <span class="fl">7.5</span>, <span class="fl">8.5</span>, <span class="fl">7.8</span>, <span class="fl">8.1</span>, <span class="fl">8.4</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">4</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">19.5</span>, <span class="fl">19.0</span>, <span class="fl">19.7</span>, <span class="fl">18.5</span>, <span class="fl">19.0</span>, <span class="fl">20.3</span>, <span class="fl">20.0</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">4</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.8</span>, <span class="fl">2</span>, <span class="fl">2.5</span>, <span class="fl">2.0</span>, <span class="fl">1.5</span>, <span class="fl">1.7</span>, <span class="fl">2.0</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">4</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">27.1</span>, <span class="fl">29.8</span>, <span class="fl">29.9</span>, <span class="fl">31.2</span>, <span class="fl">29.3</span>, <span class="fl">27.9</span>, <span class="fl">30.9</span>, <span class="fl">31.8</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">4</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30.0</span>, <span class="fl">30.6</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">1</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80.0</span>, <span class="fl">81.2</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">1</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8.0</span>, <span class="fl">8.1</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">1</span>, start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### check consistency between temporal and contemporaneous constraints</span></span></span>
<span class="r-in"><span><span class="va">lfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">Y1</span>,<span class="va">Y2</span>,<span class="va">Y3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">lfs</span><span class="op">)</span> <span class="op">-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate.ts</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="co"># should all be 0</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = 2010 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = 2011 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="va">x1</span>, x2 <span class="op">=</span> <span class="va">x2</span>, x3 <span class="op">=</span> <span class="va">x3</span>, z <span class="op">=</span> <span class="va">z</span>, Y1 <span class="op">=</span> <span class="va">Y1</span>, Y2 <span class="op">=</span> <span class="va">Y2</span>, Y3 <span class="op">=</span> <span class="va">Y3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y1 = sum(x1)"</span>, <span class="st">"Y2 = sum(x2)"</span>, <span class="st">"Y3 = sum(x3)"</span><span class="op">)</span> <span class="co"># temporal constraints</span></span></span>
<span class="r-in"><span><span class="va">cc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z = x1+x2+x3"</span><span class="op">)</span> <span class="co"># contemporaneous constraints</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">multivariatecholette</span><span class="op">(</span>xlist <span class="op">=</span> <span class="va">data_list</span>, tcvector <span class="op">=</span> <span class="va">tc</span>, ccvector <span class="op">=</span> <span class="va">cc</span>, rho <span class="op">=</span> <span class="fl">1</span>, lambda <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="co"># Denton</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 7.045542 7.376876 8.064691 7.512891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 8.023645 7.033308 7.564454 7.978594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 18.58604 20.59697 19.79830 21.01869</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 19.12180 19.22024 21.37601 21.48195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 1.468420 1.826157 2.037007 2.668416</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 2.154551 1.646451 1.959538 2.339460</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">multivariatecholette</span><span class="op">(</span>xlist <span class="op">=</span> <span class="va">data_list</span>, tcvector <span class="op">=</span> <span class="va">tc</span>, ccvector <span class="op">=</span> <span class="va">cc</span>, rho <span class="op">=</span> <span class="fl">0.729</span>, lambda <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="co"># Cholette</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 7.070672 7.385807 8.059196 7.484325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 7.945589 6.975158 7.571946 8.107307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 18.55121 20.58910 19.81051 21.04918</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 19.17769 19.26249 21.36970 21.39013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 1.478117 1.825096 2.030295 2.666492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 2.176725 1.662357 1.958353 2.302565</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">multivariatecholette</span><span class="op">(</span>xlist <span class="op">=</span> <span class="va">data_list</span>, tcvector <span class="op">=</span> <span class="cn">NULL</span>, ccvector <span class="op">=</span> <span class="va">cc</span>, rho <span class="op">=</span> <span class="fl">1</span>, lambda <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="co"># no temporal constraints</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Qtr1       Qtr2       Qtr3       Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 0.09471188 0.24191380 0.61537179 0.19776270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 0.75425553 0.33620487 0.74406548 0.97135123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 19.70581 21.39462 20.60378 21.06272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 19.88066 20.29720 22.26361 22.09731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 7.299482 8.163465 8.680845 9.939513</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 8.665084 7.266593 7.892321 8.731341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: two contemporaneous constraints: x1+3*x2+0.5*x3+x4+x5 = z1 and x1+x2 = x4</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7.0</span>,<span class="fl">7.3</span>,<span class="fl">8.1</span>,<span class="fl">7.5</span>,<span class="fl">8.5</span>,<span class="fl">7.8</span>,<span class="fl">8.1</span>,<span class="fl">8.4</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>,<span class="fl">1.8</span>,<span class="fl">2.0</span>,<span class="fl">2.5</span>,<span class="fl">2.0</span>,<span class="fl">1.5</span>,<span class="fl">1.7</span>,<span class="fl">2.0</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18.0</span>,<span class="fl">19.5</span>,<span class="fl">19.0</span>,<span class="fl">19.7</span>,<span class="fl">18.5</span>,<span class="fl">19.0</span>,<span class="fl">20.3</span>,<span class="fl">20.0</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">9.5</span>,<span class="fl">9.0</span>,<span class="fl">10.7</span>,<span class="fl">8.5</span>,<span class="fl">10.0</span>,<span class="fl">10.3</span>,<span class="fl">9.0</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">9.6</span>,<span class="fl">7.2</span>,<span class="fl">7.1</span>,<span class="fl">4.3</span>,<span class="fl">4.6</span>,<span class="fl">5.3</span>,<span class="fl">5.9</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">z1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">38.1</span>,<span class="fl">41.8</span>,<span class="fl">41.9</span>,<span class="fl">43.2</span>,<span class="fl">38.8</span>,<span class="fl">39.1</span>,<span class="fl">41.9</span>,<span class="fl">43.7</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30.0</span>,<span class="fl">30.5</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">1</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10.0</span>,<span class="fl">10.5</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">1</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80.0</span>,<span class="fl">81.0</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">1</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40.0</span>,<span class="fl">41.0</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">1</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25.0</span>,<span class="fl">20.0</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">1</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### check consistency between temporal and contemporaneous constraints</span></span></span>
<span class="r-in"><span><span class="va">lfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">Y1</span>,<span class="fl">3</span><span class="op">*</span><span class="va">Y2</span>,<span class="fl">0.5</span><span class="op">*</span><span class="va">Y3</span>,<span class="va">Y4</span>,<span class="va">Y5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">lfs</span><span class="op">)</span> <span class="op">-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate.ts</a></span><span class="op">(</span><span class="va">z1</span><span class="op">)</span> <span class="co"># should all be 0</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = 2010 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = 2011 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x1<span class="op">=</span><span class="va">x1</span>,x2<span class="op">=</span><span class="va">x2</span>,x3<span class="op">=</span><span class="va">x3</span>,x4<span class="op">=</span><span class="va">x4</span>,x5<span class="op">=</span><span class="va">x5</span>,z1<span class="op">=</span><span class="va">z1</span>,Y1<span class="op">=</span><span class="va">Y1</span>,Y2<span class="op">=</span><span class="va">Y2</span>,Y3<span class="op">=</span><span class="va">Y3</span>,Y4<span class="op">=</span><span class="va">Y4</span>,Y5<span class="op">=</span><span class="va">Y5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y1=sum(x1)"</span>, <span class="st">"Y2=sum(x2)"</span>, <span class="st">"Y3=sum(x3)"</span>, <span class="st">"Y4=sum(x4)"</span>, <span class="st">"Y5=sum(x5)"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"z1=x1+3*x2+0.5*x3+x4+x5"</span>, <span class="st">"0=x1+x2-x4"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">multivariatecholette</span><span class="op">(</span>xlist <span class="op">=</span> <span class="va">data.list</span>, tcvector <span class="op">=</span> <span class="va">tc</span>, ccvector <span class="op">=</span> <span class="va">cc</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 7.656913 7.459133 7.691486 7.192468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 7.202555 7.844736 7.928212 7.524497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 2.038004 2.240979 2.542287 3.178730</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 2.690178 2.243273 2.563886 3.002663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 20.29245 20.00733 19.93548 19.76474</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 19.18196 19.81496 20.94547 21.05761</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Qtr1      Qtr2      Qtr3      Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010  9.694917  9.700111 10.233773 10.371198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011  9.892733 10.088009 10.492098 10.527160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Qtr1     Qtr2     Qtr3     Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2010 4.487934 7.914155 6.380138 6.217772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2011 4.043199 4.529957 5.315297 6.111547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean Palate, Corentin Lemasson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

