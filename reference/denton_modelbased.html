<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Temporal disaggregation of a time series by model-based Denton proportional method — denton_modelbased • rjd3bench</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Temporal disaggregation of a time series by model-based Denton proportional method — denton_modelbased"><meta name="description" content="Denton proportional method can be expressed as a statistical model in a State
space representation (see documentation for the definition of states). This
approach is interesting as it allows more flexibility in the model such as
the inclusion of outliers (level shift in the Benchmark to Indicator ratio)
that could otherwise induce unintended wave effects with standard Denton method.
Outliers and their intensity are defined by changing the value of the
'innovation variances'."><meta property="og:description" content="Denton proportional method can be expressed as a statistical model in a State
space representation (see documentation for the definition of states). This
approach is interesting as it allows more flexibility in the model such as
the inclusion of outliers (level shift in the Benchmark to Indicator ratio)
that could otherwise induce unintended wave effects with standard Denton method.
Outliers and their intensity are defined by changing the value of the
'innovation variances'."><meta property="og:image" content="https://rjdverse.github.io/rjd3bench/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rjd3bench</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rjd3bench.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rjdverse/rjd3bench/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Temporal disaggregation of a time series by model-based Denton proportional method</h1>
      <small class="dont-index">Source: <a href="https://github.com/rjdverse/rjd3bench/blob/develop/R/mbdenton.R" class="external-link"><code>R/mbdenton.R</code></a></small>
      <div class="d-none name"><code>denton_modelbased.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Denton proportional method can be expressed as a statistical model in a State
space representation (see documentation for the definition of states). This
approach is interesting as it allows more flexibility in the model such as
the inclusion of outliers (level shift in the Benchmark to Indicator ratio)
that could otherwise induce unintended wave effects with standard Denton method.
Outliers and their intensity are defined by changing the value of the
'innovation variances'.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">denton_modelbased</span><span class="op">(</span></span>
<span>  <span class="va">series</span>,</span>
<span>  <span class="va">indicator</span>,</span>
<span>  differencing <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  conversion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sum"</span>, <span class="st">"Average"</span>, <span class="st">"Last"</span>, <span class="st">"First"</span>, <span class="st">"UserDefined"</span><span class="op">)</span>,</span>
<span>  conversion.obsposition <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  outliers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fixedBIratios <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-series">series<a class="anchor" aria-label="anchor" href="#arg-series"></a></dt>
<dd><p>Aggregation constraint. Mandatory. It must be either an object of class ts or a numeric vector.</p></dd>


<dt id="arg-indicator">indicator<a class="anchor" aria-label="anchor" href="#arg-indicator"></a></dt>
<dd><p>High-frequency indicator. Mandatory. It must be of same class as series</p></dd>


<dt id="arg-differencing">differencing<a class="anchor" aria-label="anchor" href="#arg-differencing"></a></dt>
<dd><p>Not implemented yet. Keep it equals to 1 (Denton PFD method).</p></dd>


<dt id="arg-conversion">conversion<a class="anchor" aria-label="anchor" href="#arg-conversion"></a></dt>
<dd><p>Conversion rule. Usually "Sum" or "Average". Sum by default.</p></dd>


<dt id="arg-conversion-obsposition">conversion.obsposition<a class="anchor" aria-label="anchor" href="#arg-conversion-obsposition"></a></dt>
<dd><p>Position of the observation in the aggregated period (only used with "UserDefined" conversion)</p></dd>


<dt id="arg-outliers">outliers<a class="anchor" aria-label="anchor" href="#arg-outliers"></a></dt>
<dd><p>a list of structured definition of the outlier periods and their intensity. The period must be submitted
first in the format YYYY-MM-DD and enclosed in quotation marks. This must be followed by an equal sign and
the intensity of the outlier, defined as the relative value of the 'innovation variances' (1= normal situation)</p></dd>


<dt id="arg-fixedbiratios">fixedBIratios<a class="anchor" aria-label="anchor" href="#arg-fixedbiratios"></a></dt>
<dd><p>a list of structured definition of the periods where the BI ratios must be fixed. The period must be
submitted first in the format YYYY-MM-DD and enclosed in quotation marks. This must be followed by an
equal sign and the value of the BI ratio.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object of class 'JD3MBDenton'</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># retail data, monthly indicator</span></span></span>
<span class="r-in"><span><span class="va">Y</span><span class="op">&lt;-</span><span class="fu">rjd3toolkit</span><span class="fu">::</span><span class="fu"><a href="https://rjdverse.github.io/rjd3toolkit/reference/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="fu">rjd3toolkit</span><span class="fu">::</span><span class="va">retail</span><span class="op">$</span><span class="va">RetailSalesTotal</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">&lt;-</span><span class="fu">rjd3toolkit</span><span class="fu">::</span><span class="fu"><a href="https://rjdverse.github.io/rjd3toolkit/reference/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="fu">rjd3toolkit</span><span class="fu">::</span><span class="va">retail</span><span class="op">$</span><span class="va">FoodAndBeverageStores</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td</span><span class="op">&lt;-</span><span class="fu">rjd3bench</span><span class="fu">::</span><span class="fu">denton_modelbased</span><span class="op">(</span><span class="va">Y</span>, <span class="va">x</span>, outliers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"2000-01-01"</span><span class="op">=</span><span class="fl">100</span>, <span class="st">"2005-07-01"</span><span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span><span class="op">&lt;-</span><span class="va">td</span><span class="op">$</span><span class="va">estimation</span><span class="op">$</span><span class="va">edisagg</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># qna data, quarterly indicator</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"qna_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Y</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="va">qna_data</span><span class="op">$</span><span class="va">B1G_Y_data</span><span class="op">[</span>,<span class="st">"B1G_FF"</span><span class="op">]</span>, frequency<span class="op">=</span><span class="fl">1</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2009</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="va">qna_data</span><span class="op">$</span><span class="va">TURN_Q_data</span><span class="op">[</span>,<span class="st">"TURN_INDEX_FF"</span><span class="op">]</span>, frequency<span class="op">=</span><span class="fl">4</span>, start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2009</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">td1</span><span class="op">&lt;-</span><span class="fu">rjd3bench</span><span class="fu">::</span><span class="fu">denton_modelbased</span><span class="op">(</span><span class="va">Y</span>, <span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">td2</span><span class="op">&lt;-</span><span class="fu">rjd3bench</span><span class="fu">::</span><span class="fu">denton_modelbased</span><span class="op">(</span><span class="va">Y</span>, <span class="va">x</span>, outliers<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"2020-04-01"</span><span class="op">=</span><span class="fl">100</span><span class="op">)</span>, fixedBIratios<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"2021-04-01"</span><span class="op">=</span><span class="fl">39.0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bi1</span><span class="op">&lt;-</span><span class="va">td1</span><span class="op">$</span><span class="va">estimation</span><span class="op">$</span><span class="va">biratio</span></span></span>
<span class="r-in"><span><span class="va">bi2</span><span class="op">&lt;-</span><span class="va">td2</span><span class="op">$</span><span class="va">estimation</span><span class="op">$</span><span class="va">biratio</span></span></span>
<span class="r-in"><span><span class="va">y1</span><span class="op">&lt;-</span><span class="va">td1</span><span class="op">$</span><span class="va">estimation</span><span class="op">$</span><span class="va">disagg</span></span></span>
<span class="r-in"><span><span class="va">y2</span><span class="op">&lt;-</span><span class="va">td2</span><span class="op">$</span><span class="va">estimation</span><span class="op">$</span><span class="va">disagg</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/ts.plot.html" class="external-link">ts.plot</a></span><span class="op">(</span><span class="va">bi1</span>,<span class="va">bi2</span>,gpars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>,<span class="st">"blue"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/ts.plot.html" class="external-link">ts.plot</a></span><span class="op">(</span><span class="va">y1</span>,<span class="va">y2</span>,gpars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>,<span class="st">"blue"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean Palate, Corentin Lemasson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

