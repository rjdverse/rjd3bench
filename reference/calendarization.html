<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calendarization — calendarization • rjd3bench</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calendarization — calendarization"><meta name="description" content="Time series data do not always coincide with calendar periods (e.g., fiscal
years starting in March-April or retail data collected in non-monthly
intervals). Calendarization is the process of transforming the values of a
flow time series observed over varying time intervals into values that cover
given calendar intervals such as month, quarter or year. The process involves
two steps. At first, a state-space representation of the Denton proportional
first difference (PFD) method is considered to perform a temporal
disaggregation of the observed data into daily values. After that, the
resulting daily values are aggregated into the desired calendar reference
periods."><meta property="og:description" content="Time series data do not always coincide with calendar periods (e.g., fiscal
years starting in March-April or retail data collected in non-monthly
intervals). Calendarization is the process of transforming the values of a
flow time series observed over varying time intervals into values that cover
given calendar intervals such as month, quarter or year. The process involves
two steps. At first, a state-space representation of the Denton proportional
first difference (PFD) method is considered to perform a temporal
disaggregation of the observed data into daily values. After that, the
resulting daily values are aggregated into the desired calendar reference
periods."><meta property="og:image" content="https://rjdverse.github.io/rjd3bench/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rjd3bench</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rjd3bench.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rjdverse/rjd3bench/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Calendarization</h1>
      <small class="dont-index">Source: <a href="https://github.com/rjdverse/rjd3bench/blob/develop/R/calendarization.R" class="external-link"><code>R/calendarization.R</code></a></small>
      <div class="d-none name"><code>calendarization.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Time series data do not always coincide with calendar periods (e.g., fiscal
years starting in March-April or retail data collected in non-monthly
intervals). Calendarization is the process of transforming the values of a
flow time series observed over varying time intervals into values that cover
given calendar intervals such as month, quarter or year. The process involves
two steps. At first, a state-space representation of the Denton proportional
first difference (PFD) method is considered to perform a temporal
disaggregation of the observed data into daily values. After that, the
resulting daily values are aggregated into the desired calendar reference
periods.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calendarization</span><span class="op">(</span></span>
<span>  <span class="va">calendarobs</span>,</span>
<span>  <span class="va">freq</span>,</span>
<span>  start <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dailyweights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stde <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-calendarobs">calendarobs<a class="anchor" aria-label="anchor" href="#arg-calendarobs"></a></dt>
<dd><p>A named list with the observed data. The list must be
composed of three elements: start, end and value, the first two
corresponding to the starting and ending date of the observation. See
example.</p></dd>


<dt id="arg-freq">freq<a class="anchor" aria-label="anchor" href="#arg-freq"></a></dt>
<dd><p>Annual frequency. If 0, only the daily series are computed.</p></dd>


<dt id="arg-start">start<a class="anchor" aria-label="anchor" href="#arg-start"></a></dt>
<dd><p>Starting day of the calendarization. Could be before the
starting date of the first observation (retropolation).</p></dd>


<dt id="arg-end">end<a class="anchor" aria-label="anchor" href="#arg-end"></a></dt>
<dd><p>Ending day of the calendarization. Could be after the ending date
of the last observation (extrapolation).</p></dd>


<dt id="arg-dailyweights">dailyweights<a class="anchor" aria-label="anchor" href="#arg-dailyweights"></a></dt>
<dd><p>Daily indicator values (or weights). Should have the same
  length as the requested series. If available, it typically reflects the
  daily level of activity that may be varying in function for instance of
seasonality, trading day or other calendar effects such as public holidays.</p></dd>


<dt id="arg-stde">stde<a class="anchor" aria-label="anchor" href="#arg-stde"></a></dt>
<dd><p>Boolean. If TRUE, the function also returns the standard errors
associated to the results. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list with the disaggregated daily values, the final aggregated
  results, and their associated errors if requested.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Quenneville, B., Picard F., Fortier S. (2012). Calendarization
  with interpolating splines and state space models. Statistics Canada, Appl.
  Statistics (2013) 62, part 3, pp 371-399.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>For more information, see the vignette:</p>
<p><code><a href="https://rdrr.io/r/utils/browseVignettes.html" class="external-link">browseVignettes</a></code> <code>browseVignettes(package = "rjd3bench")</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1 (from Quenneville et al (2012))</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Observed data</span></span></span>
<span class="r-in"><span><span class="va">obs_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"2009-02-18"</span>, end <span class="op">=</span> <span class="st">"2009-03-17"</span>, value <span class="op">=</span> <span class="fl">9000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"2009-03-18"</span>, end <span class="op">=</span> <span class="st">"2009-04-14"</span>, value <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"2009-04-15"</span>, end <span class="op">=</span> <span class="st">"2009-05-12"</span>, value <span class="op">=</span> <span class="fl">9500</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"2009-05-13"</span>, end <span class="op">=</span> <span class="st">"2009-06-09"</span>, value <span class="op">=</span> <span class="fl">7000</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a) calendarization in absence of daily indicator values (or weights)</span></span></span>
<span class="r-in"><span><span class="va">cal_1a</span> <span class="op">&lt;-</span> <span class="fu">calendarization</span><span class="op">(</span><span class="va">obs_1</span>, <span class="fl">12</span>, end <span class="op">=</span> <span class="st">"2009-06-30"</span>, dailyweights <span class="op">=</span> <span class="cn">NULL</span>, stde <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ym_1a</span> <span class="op">&lt;-</span> <span class="va">cal_1a</span><span class="op">$</span><span class="va">rslt</span></span></span>
<span class="r-in"><span><span class="va">eym_1a</span> <span class="op">&lt;-</span> <span class="va">cal_1a</span><span class="op">$</span><span class="va">erslt</span></span></span>
<span class="r-in"><span><span class="va">yd_1a</span> <span class="op">&lt;-</span> <span class="va">cal_1a</span><span class="op">$</span><span class="va">days</span></span></span>
<span class="r-in"><span><span class="va">eyd_1a</span> <span class="op">&lt;-</span> <span class="va">cal_1a</span><span class="op">$</span><span class="va">edays</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## b) calendarization in presence of daily indicator values (or weights)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0</span>, <span class="fl">1.2</span>, <span class="fl">1.8</span> , <span class="fl">1.6</span>, <span class="fl">0.0</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span><span class="op">)</span>, <span class="fl">19</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cal_1b</span> <span class="op">&lt;-</span> <span class="fu">calendarization</span><span class="op">(</span><span class="va">obs_1</span>, <span class="fl">12</span>, end <span class="op">=</span> <span class="st">"2009-06-30"</span>, dailyweights <span class="op">=</span> <span class="va">x</span>, stde <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ym_1b</span> <span class="op">&lt;-</span> <span class="va">cal_1b</span><span class="op">$</span><span class="va">rslt</span></span></span>
<span class="r-in"><span><span class="va">eym_1b</span> <span class="op">&lt;-</span> <span class="va">cal_1b</span><span class="op">$</span><span class="va">erslt</span></span></span>
<span class="r-in"><span><span class="va">yd_1b</span> <span class="op">&lt;-</span> <span class="va">cal_1b</span><span class="op">$</span><span class="va">days</span></span></span>
<span class="r-in"><span><span class="va">eyd_1b</span> <span class="op">&lt;-</span> <span class="va">cal_1b</span><span class="op">$</span><span class="va">edays</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2 (incl. negative value)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">obs_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"1980-01-01"</span>, end <span class="op">=</span> <span class="st">"1989-12-31"</span>, value <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"1990-01-01"</span>, end <span class="op">=</span> <span class="st">"1999-12-31"</span>, value <span class="op">=</span> <span class="op">-</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"2000-01-01"</span>, end <span class="op">=</span> <span class="st">"2002-12-31"</span>, value <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cal_2</span> <span class="op">&lt;-</span> <span class="fu">calendarization</span><span class="op">(</span><span class="va">obs_2</span>, <span class="fl">4</span>, end <span class="op">=</span> <span class="st">"2003-12-31"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">yq_2</span> <span class="op">&lt;-</span> <span class="va">cal_2</span><span class="op">$</span><span class="va">rslt</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean Palate, Corentin Lemasson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

